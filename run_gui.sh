#!/bin/bash

echo "üê† –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã '–ê–∫–≤–∞—Ä–∏—É–º' —Å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º üê†"
echo "=================================================="

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Java
if ! command -v java &> /dev/null; then
    echo "‚ùå –û—à–∏–±–∫–∞: Java –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ PATH"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ javac
if ! command -v javac &> /dev/null; then
    echo "‚ùå –û—à–∏–±–∫–∞: Java –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä (javac) –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

echo "‚úÖ Java –Ω–∞–π–¥–µ–Ω–∞: $(java -version 2>&1 | head -n 1)"

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –∫–ª–∞—Å—Å–æ–≤
mkdir -p classes

# –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º –≤—Å–µ Java —Ñ–∞–π–ª—ã
echo "üî® –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞..."
javac -d classes src/main/java/aquarium/*.java

if [ $? -eq 0 ]; then
    echo "‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!"
    echo ""
    echo "üöÄ –ó–∞–ø—É—Å–∫ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞..."
    echo "   (–ó–∞–∫—Ä–æ–π—Ç–µ –æ–∫–Ω–æ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –≤—ã—Ö–æ–¥–∞)"
    echo ""
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    java -cp classes aquarium.AquariumGUI
else
    echo "‚ùå –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏!"
    echo "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö."
    exit 1
fi